{% extends 'base.html.twig' %}
{% set page = 'signUp' %}

{% block title %}Inscription{% endblock %}

{% block body %}
  <body id="layoutAuthentication" class="bg-primary">
    <div id="layoutAuthentication_content">
      <main>
        <div class="container-xl px-4">
          <div class="row justify-content-center">
            <div class="col-lg-7">
              <!-- Basic registration form-->
              <div class="card shadow-lg border-0 rounded-lg mt-5">
                <div class="card-header justify-content-center">
                  <h3 class="fw-light my-4">Créer un compte</h3>
                </div>
                <div class="card-body p-0">
                  <!-- Symfony Registration form -->
                  {{ form_start(signUpForm, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
                  <!-- Form Row-->
                  <div class="row gx-3 p-5 pb-2">
                    <div class="{{ signUpForm.firstName.vars.errors ? 'has-error' : '' }}">
                      <!-- Form Group (first name)-->
                      <div class="mb-3">
                        {{ form_label(signUpForm.firstName, 'Prénom *', {'label_attr': {'class': 'small mb-1'}}) }}
                        {{ form_widget(signUpForm.firstName, {'attr': {'class': 'form-control'}}) }}
                        <span class="error-message">
                          {{ form_errors(signUpForm.firstName) }}</span>
                      </div>
                    </div>
                    <div class="{{ signUpForm.lastName.vars.errors ? 'has-error' : '' }}">
                      <!-- Form Group (last name)-->
                      <div class="mb-3">
                        {{ form_label(signUpForm.lastName, 'Nom *', {'label_attr': {'class': 'small mb-1'}}) }}
                        {{ form_widget(signUpForm.lastName, {'attr': {'class': 'form-control'}}) }}
                        <span class="error-message">
                          {{ form_errors(signUpForm.lastName) }}</span>
                      </div>
                    </div>
                    <div class="{{ signUpForm.userName.vars.errors ? 'has-error' : '' }}">
                      <!-- Form Group (user name)-->
                      <div class="mb-3">
                        {{ form_label(signUpForm.userName, 'Nom d\'utilisateur *', {'label_attr': {'class': 'small mb-1'}}) }}
                        {{ form_widget(signUpForm.userName, {'attr': {'class': 'form-control'}}) }}
                        <span class="error-message"> {{ form_errors(signUpForm.userName) }}</span>
                      </div>
                    </div>
                    <div class="{{ signUpForm.email.vars.errors ? 'has-error' : '' }}">
                      <!-- Form Group (email)-->
                      <div class="mb-3">
                        {{ form_label(signUpForm.email, 'Adresse email *', {'label_attr': {'class': 'small mb-1'}}) }}
                        {{ form_widget(signUpForm.email, {'attr': {'class': 'form-control'}}) }}
                        <span class="error-message"> {{ form_errors(signUpForm.email) }}</span>
                      </div>
                    </div>
                    <!-- Form Row -->
                    <div class="row gx-3">
                      <div class="col-md-6">
                        <div class="{{ signUpForm.password.vars.errors ? 'has-error' : '' }}">
                          <!-- Form Group (password)-->
                          <div class="mb-3">
                            {{ form_label(signUpForm.password, 'Mot de passe *', {'label_attr': {'class': 'small mb-1'}}) }}
                              <div class="input-group-append">  
                                {{ form_widget(signUpForm.password, {'attr': {'class': 'form-control'}}) }}
                                <button class="btn btn-outline-secondary" type="button" id="showPasswordBtn">
                                  <i class="fa fa-eye" id="password-icon"></i>
                                </button>
                              </div>
                              <span class="error-message"> {{ form_errors(signUpForm.password) }}</span>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="{{ signUpForm.passwordConfirm.vars.errors ? 'has-error' : '' }}">
                          <!-- Form Group (password confirm)-->
                          <div class="mb-3">
                            {{ form_label(signUpForm.passwordConfirm, 'Confirmez votre mot de passe *', {'label_attr': {'class': 'small mb-1'}}) }}
                              <div class="input-group-append">
                                {{ form_widget(signUpForm.passwordConfirm, {'attr': {'class': 'form-control'}}) }}
                                <button class="btn btn-outline-secondary" type="button" id="showConfirmPasswordBtn">
                                  <i class="fa fa-eye" id="confirm-password-icon"></i>
                                </button>
                              </div>
                            <span class="error-message"> {{ form_errors(signUpForm.passwordConfirm) }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="{{ signUpForm.userPicture.vars.errors ? 'has-error' : '' }}">
                      <!-- Form Group (user picture)-->
                      <div class="mb-3">
                        {{ form_label(signUpForm.userPicture, 'Image de profil *', {'label_attr': {'class': 'small mb-1'}}) }}
                        {{ form_widget(signUpForm.userPicture, {'attr': {'class': 'form-control'}}) }}
                        <span class="error-message"> {{ form_errors(signUpForm.userPicture) }}</span>
                      </div>
                    </div>
                  </div>
                  <!-- Form Group (create account submit)-->
                  <div class="d-flex align-items-center justify-content-between p-5 pb-2 pt-2">
                    <a class="small text-secondary" href="{{ path('homepage') }}">Voir la liste des figures</a>
                    <button type="submit" class="btn btn-primary">Créer un compte</button>
                  </div>
                  <div class="small text-muted p-5 pt-2 pb-2">
                    * Ces champs sont obligatoires
                  </div>
                {{ form_end(signUpForm) }}
                <!-- Fin Symfony Registration form -->
                <div class="card-footer text-center">
                  <div class="small">
                    <a class="text-secondary" href="{{ path('connexion') }}">Vous êtes déjà inscrit? Connectez-vous</a>
                    {# href="{{path('signIn')}}" #}
                  </div>
                </div>
              </div>
              <!-- ... Le reste du code du formulaire existant -->
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
{% endblock %}
